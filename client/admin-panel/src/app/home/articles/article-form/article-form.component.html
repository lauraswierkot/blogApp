<div class="container">
  <form
    class="container__form"
    [formGroup]="articleForm"
    (ngSubmit)="submitForm()">
    <header class="container__form--title">Create an article</header>
    <div class="container__form__field">
      <input
        class="container__form__field--input"
        formControlName="title"
        placeholder="Type title here"
        name="title"
        required/>
      <div
        class="container__form__field--message"
        *ngIf="title.errors && title.touched">
        Title is missing.
      </div>
    </div>
    <div class="container__form__field">
      <textarea
        class="container__form__field--input"
        formControlName="body"
        placeholder="Type body here"
        name="body"
        required>
      </textarea>
      <div
        class="container__form__field--message"
        *ngIf="body.errors && body.touched">
        Body is missing.
      </div>
    </div>
    <div class="container__form__field">
      <textarea
        class="container__form__field--input"
        type="text"
        formControlName="description"
        placeholder="Type description here"
        name="description"
        required>
      </textarea>
      <div
        class="container__form__field--message"
        *ngIf="description.errors && description.touched">
        Description is missing.
      </div>
    </div>
    <div class="container__form__field">
      <mat-form-field
        appearance="fill"
        class="container__form__field--input"
        >
        <mat-chip-list
          #chipList
          aria-label="Enter tags"
          formControlName="tagList">
          <mat-chip
            *ngFor="let tag of articleForm.controls['tagList'].value"
            [selectable]="selectable"
            [removable]="removable"
            (removed)="removeTag(tag)">
            {{ tag }}
            <mat-icon matChipRemove *ngIf="removable">cancel</mat-icon>
          </mat-chip>
          <input
            placeholder="Add tag & hit enter"
            [matChipInputFor]="chipList"
            [matChipInputSeparatorKeyCodes]="separatorKeysCodes"
            [matChipInputAddOnBlur]="addOnBlur"
            (matChipInputTokenEnd)="addTag($event)"/>
        </mat-chip-list>
      </mat-form-field>
    </div>
    <div class="container__form__field">
      <input
        class="container__form__field--input"
        type="file"
        (change)="onFileSelect($event)"
        formControlName="file"
        placeholder="Insert image here"
        name="file"
        required/>
      <div
        class="container__form__field--message"
        *ngIf="file.errors && file.touched">
        File is missing.
      </div>
    </div>
    <div *ngIf="selectedArticle?.comments !== null">
      <div *ngFor="let comment of selectedArticle.comments">
        <p>{{comment.body}}
           <button type="button" (click)="deleteComment(selectedArticle.slug, comment.id)">REMOVE</button>
        </p>
      </div>
    </div>
    <div class="container__form__field">
      <button
        type="submit"
        [disabled]="!articleForm.valid">
        <span>Submit</span>
      </button>
    </div>
    <div class="container_form__field container__form__field--login">
      <span>Do not want an article for now? Back to Admin Panel</span>
      <span
        class="material-icons container__form__field--icons arrow"
        (click)="toAdminPanel()">trending_flat
      </span>
    </div>
  </form>
</div>
